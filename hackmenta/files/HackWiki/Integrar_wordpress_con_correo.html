<!DOCTYPE html>
<html lang="es" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Integrar wordpress con correo - HackLab de Barracas</title>
<meta name="generator" content="MediaWiki 1.22.0">
<meta name="robots" content="noindex,follow">
<meta name="description" content="La idea es que todos lxs usuarixs de una instalación de wordpress tengan redirecciones de correo del sitio, de forma que si soy fauno en http://wp.hackcoop.com.ar, me puedan escribir a fauno@wp.hackcoop.com.ar y me llegue a mi cuenta personal.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="favicon.ico.html">
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php.html" title="HackLab de Barracas (es)">
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.hackcoop.com.ar/api.php?action=rsd">
<link rel="copyright" href="HackLab_de_Barracas:Derechos_de_autor.html">
<link rel="alternate" type="application/atom+xml" title="Feed Atom de HackLab de Barracas" href="index.php?title=Especial:CambiosRecientes&amp;feed=atom.html">
<link rel="stylesheet" href="ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:da81894a262faddb62408789293d7adb */</style>

<meta property="og:type" content="article">
	<meta property="og:site_name" content="HackLab de Barracas">
	<meta property="og:title" content="Integrar wordpress con correo">
	<meta property="og:description" content="La idea es que todos lxs usuarixs de una instalación de wordpress tengan redirecciones de correo del sitio, de forma que si soy fauno en http://wp.hackcoop.com.ar, me puedan escribir a fauno@wp.hackcoop.com.ar y me llegue a mi cuenta personal.">
	<meta property="og:url" content="http://wiki.hackcoop.com.ar/Integrar_wordpress_con_correo">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Integrar_wordpress_con_correo skin-bootstrap action-view">

			<nav class="navbar"><div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="P%C3%A1gina_principal.html">HackLab de Barracas</a><div id="user" class="pull-right btn-group">
<a href="index.php?title=Especial:Entrar&amp;returnto=Integrar+wordpress+con+correo&amp;returntoquery=printable%3Dyes.html" class="btn btn-warning">Iniciar sesión <icon class="icon-signin icon-white"></icon></a><button class="btn dropdown-toggle btn-warning" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu">
<li id="pt-uls" class="active"><a href="#" class="uls-trigger autonym">español</a></li>
<li id="pt-createaccount"><a href="index.php?title=Especial:Entrar&amp;returnto=Integrar+wordpress+con+correo&amp;returntoquery=printable%3Dyes&amp;type=signup.html">Crear una cuenta</a></li>
</ul>
</div>
<div class="nav-collapse"><ul class="nav">
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:Gu%C3%ADas.html" title="Categoría:Guías">Guías</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://wiki.hackcoop.com.ar/index.php?title=Especial:Categor%C3%ADas&amp;limit=500">Categorías</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">Quehaceres</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://irc.hackcoop.com.ar/">Chat</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
</ul></div>
</div></div>
<div id="page" class="pull-right"><ul class="nav nav-tabs">
<li id="ca-nstab-main" class="selected"><a href="Integrar_wordpress_con_correo.html" title="Ver el artículo [c]" accesskey="c">Página</a></li>
<li id="ca-talk" class="new"><a href="index.php?title=Discusi%C3%B3n:Integrar_wordpress_con_correo&amp;action=edit&amp;redlink=1.html" title="Discusión acerca del artículo [t]" accesskey="t">Discusión</a></li>
<li id="ca-viewsource"><a href="index.php?title=Integrar_wordpress_con_correo&amp;action=edit.html" title="Esta página está protegida.
Puedes ver su código fuente [e]" accesskey="e">Ver fuente</a></li>
<li id="ca-history"><a href="index.php?title=Integrar_wordpress_con_correo&amp;action=history.html" rel="archives" title="Versiones anteriores de esta página y sus autores [h]" accesskey="h">Historial</a></li>
</ul></div></nav>

			<div id="page" class="container container-fluid">

				<div class="row-fluid">
					<aside class="span3">
								<ul class="nav nav-stacked nav-pills">
<li><form action="/index.php" class="search"><input type="search" name="search" placeholder="Search" title="Buscar en HackLab de Barracas [f]" accesskey="f" id="searchInput" class="search-query"></form></li>
<li> <a href="P%C3%A1gina_principal.html" title="Página principal"><img alt="LogoHacklab.svg" src="../File:195px-LogoHacklab.svg.png" width="195" height="195" srcset="/images/thumb/9/9d/LogoHacklab.svg/293px-LogoHacklab.svg.png 1.5x, /images/thumb/9/9d/LogoHacklab.svg/390px-LogoHacklab.svg.png 2x"></a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:SubirArchivo.html" title="Especial:SubirArchivo">Subir un archivo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
<li> <a href="Categor%C3%ADa:CositaLinda.html" title="Categoría:CositaLinda">Cositas Lindas</a>
</li>
<li> <a href="Especial:ListaIm%C3%A1genes.html" title="Especial:ListaImágenes">y más archivos</a>
</li>
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHaceres</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Otras acciones</a>
</li>
</ul>
							</aside>
						
					<article id="content" class="span8" style="margin: 2em; margin-bottom: 0">
						<div class="page-header">
							<h1>
								Integrar wordpress con correo								<small></small>
							</h1>
						</div>	
						<div id="mw-content-text" lang="es" dir="ltr" class="mw-content-ltr">
<p><br>
La idea es que todos lxs usuarixs de una instalación de wordpress tengan redirecciones de correo del sitio, de forma que si soy <i>fauno</i> en <a rel="nofollow" class="external free" href="http://wp.hackcoop.com.ar">http://wp.hackcoop.com.ar</a>, me puedan escribir a <b>fauno@wp.hackcoop.com.ar</b> y me llegue a mi cuenta personal.
</p>
<h2><span class="mw-headline" id="Postfix">Postfix</span></h2>
<p>En <code>main.cf</code>
</p>
<pre> alias_maps = hash:/etc/postfix/aliases<b>,</b>
              <b>mysql:/etc/postfix/wordpress_aliases.cf</b>
</pre>
<p>En <code>/etc/postfix/wordpress_aliases.cf</code>
</p>
<pre> user = <b>postfix</b>
 password = <b>contraseña loca</b>
 dbname = <b>wordpress</b>
 
 query = select user_email from wp_users where user_login = '%u' and spam = 0 and deleted = 0 and user_email &lt;&gt; '%s';
</pre>
<p>Esto hace que al recibir el correo <b>fauno@wp.hackcoop.com.ar</b>, postfix busque si en wordpress hay un usuario <b>fauno</b> y si existe, le envíe el correo a la dirección registrada.
</p>
<p>Las otras condiciones impiden la redirección a usuarios marcados como spambots o borrados o si la redirección apunta al mismo correo (si fauno@wp.hackcoop.com.ar va a redirigir a fauno@wp.hackcoop.com.ar, en lugar de provocar un ciclo infinito, devuelve un valor vacío indicando que no hay un alias).
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="TODO">TODO</span></h2>
<p>Integrar los dominios en la lista de dominios de postfix.  Esto se puede hacer agregando la consulta en <code>mydestination</code> o en <code>virtual_alias_domains</code>, pero en este caso hay que mover los alias a <code>virtual_alias_maps</code>.
</p>
<p>Probar esta otra consulta que obtiene a qué blog pertenece cada usuario (si tiene más de uno nos jodemos).
</p>
<pre> select *
 from wp_users as u
   left join wp_usermeta as m on m.user_id = u.id and m.meta_key like "primary_blog"
   left join wp_blogs as b on b.blog_id = m.meta_value;
</pre>
</div>						<footer><div id="catlinks" class="catlinks well"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="Especial:Categor%C3%ADas.html" title="Especial:Categorías">Categorías</a>: <ul>
<li><a href="Categor%C3%ADa:Wordpress.html" title="Categoría:Wordpress">Wordpress</a></li>
<li><a href="Categor%C3%ADa:Correo.html" title="Categoría:Correo">Correo</a></li>
<li><a href="Categor%C3%ADa:Servicios.html" title="Categoría:Servicios">Servicios</a></li>
<li><a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHacer</a></li>
</ul>
</div></div></footer>
											</article>
				</div>

				<ul class="horizontal">
<li> <a href="HackLab_de_Barracas:Derechos_de_autor.html" title="HackLab de Barracas:Derechos de autor">Licencia</a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://fm.hackcoop.com.ar/">Radios</a>
</li>
<li> <a href="Categor%C3%ADa:Campa%C3%B1as.html" title="Categoría:Campañas">Campañas</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://hackcoop.com.ar/listas/">Listas de correo</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Páginas especiales</a>
</li>
<li> <a href="Glosario.html" title="Glosario" class="mw-redirect">Glosario</a>
</li>
</ul>
<ul class="horizontal">
<li><a href="HackLab_de_Barracas:Pol%C3%ADtica_de_protecci%C3%B3n_de_datos.html" title="HackLab de Barracas:Política de protección de datos">Política de protección de datos</a></li>
<li><a href="HackLab_de_Barracas:Acerca_de.html" title="HackLab de Barracas:Acerca de">Acerca de HackLab de Barracas</a></li>
<li><a href="HackLab_de_Barracas:Limitaci%C3%B3n_general_de_responsabilidad.html" title="HackLab de Barracas:Limitación general de responsabilidad">Aviso legal</a></li>
</ul>
<ul class="horizontal pull-right"><li><a href="/www.mediawiki.org/.html"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a></li></ul>

			</div> </body>
			</html>
