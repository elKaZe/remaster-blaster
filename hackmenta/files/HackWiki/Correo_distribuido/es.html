<!DOCTYPE html>
<html lang="es" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Correo distribuido - HackLab de Barracas</title>
<meta name="generator" content="MediaWiki 1.22.0">
<meta name="robots" content="noindex,follow">
<meta name="description" content="Idea para infraestructura segura, resiliente y distribuida para entrega de correo, unida al Correo local.  Es similar a Owns en DNS con un poco de MixMinion pero sin requisitos especiales ni software nuevo.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="favicon.ico.html">
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php.html" title="HackLab de Barracas (es)">
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.hackcoop.com.ar/api.php?action=rsd">
<link rel="copyright" href="HackLab_de_Barracas:Derechos_de_autor.html">
<link rel="alternate" type="application/atom+xml" title="Feed Atom de HackLab de Barracas" href="index.php?title=Especial:CambiosRecientes&amp;feed=atom.html">
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:da81894a262faddb62408789293d7adb */</style>

<meta property="og:type" content="article">
	<meta property="og:site_name" content="HackLab de Barracas">
	<meta property="og:title" content="Correo distribuido/es">
	<meta property="og:description" content="Idea para infraestructura segura, resiliente y distribuida para entrega de correo, unida al Correo local.  Es similar a Owns en DNS con un poco de MixMinion pero sin requisitos especiales ni software nuevo.">
	<meta property="og:url" content="http://wiki.hackcoop.com.ar/Correo_distribuido/es">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Correo_distribuido_es skin-bootstrap action-view">

			<nav class="navbar"><div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="P%C3%A1gina_principal.html">HackLab de Barracas</a><div id="user" class="pull-right btn-group">
<a href="index.php?title=Especial:Entrar&amp;returnto=Correo+distribuido%2Fes&amp;returntoquery=printable%3Dyes.html" class="btn btn-warning">Iniciar sesión <icon class="icon-signin icon-white"></icon></a><button class="btn dropdown-toggle btn-warning" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu">
<li id="pt-uls" class="active"><a href="#" class="uls-trigger autonym">español</a></li>
<li id="pt-createaccount"><a href="index.php?title=Especial:Entrar&amp;returnto=Correo+distribuido%2Fes&amp;returntoquery=printable%3Dyes&amp;type=signup.html">Crear una cuenta</a></li>
</ul>
</div>
<div class="nav-collapse"><ul class="nav">
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:Gu%C3%ADas.html" title="Categoría:Guías">Guías</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://wiki.hackcoop.com.ar/index.php?title=Especial:Categor%C3%ADas&amp;limit=500">Categorías</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">Quehaceres</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://irc.hackcoop.com.ar/">Chat</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
</ul></div>
</div></div>
<div id="page" class="pull-right"><ul class="nav nav-tabs">
<li id="ca-nstab-main" class="selected"><a href="Correo_distribuido/es.html" title="Ver el artículo [c]" accesskey="c">Página</a></li>
<li id="ca-talk" class="new"><a href="index.php?title=Discusi%C3%B3n:Correo_distribuido/es&amp;action=edit&amp;redlink=1.html" title="Discusión acerca del artículo [t]" accesskey="t">Discusión</a></li>
<li id="ca-viewsource"><a href="index.php?title=Correo_distribuido/es&amp;action=edit.html" title="Esta página está protegida.
Puedes ver su código fuente [e]" accesskey="e">Ver fuente</a></li>
<li id="ca-history"><a href="index.php?title=Correo_distribuido/es&amp;action=history.html" rel="archives" title="Versiones anteriores de esta página y sus autores [h]" accesskey="h">Historial</a></li>
</ul></div></nav>

			<div id="page" class="container container-fluid">

				<div class="row-fluid">
					<aside class="span3">
								<ul class="nav nav-stacked nav-pills">
<li><form action="/index.php" class="search"><input type="search" name="search" placeholder="Search" title="Buscar en HackLab de Barracas [f]" accesskey="f" id="searchInput" class="search-query"></form></li>
<li> <a href="P%C3%A1gina_principal.html" title="Página principal"><img alt="LogoHacklab.svg" src="../../File:195px-LogoHacklab.svg.png" width="195" height="195" srcset="/images/thumb/9/9d/LogoHacklab.svg/293px-LogoHacklab.svg.png 1.5x, /images/thumb/9/9d/LogoHacklab.svg/390px-LogoHacklab.svg.png 2x"></a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:SubirArchivo.html" title="Especial:SubirArchivo">Subir un archivo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
<li> <a href="Categor%C3%ADa:CositaLinda.html" title="Categoría:CositaLinda">Cositas Lindas</a>
</li>
<li> <a href="Especial:ListaIm%C3%A1genes.html" title="Especial:ListaImágenes">y más archivos</a>
</li>
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHaceres</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Otras acciones</a>
</li>
</ul>
							</aside>
						
					<article id="content" class="span8" style="margin: 2em; margin-bottom: 0">
						<div class="page-header">
							<h1>
								Correo distribuido								<small></small>
							</h1>
						</div>	
						<div id="mw-content-text" lang="es" dir="ltr" class="mw-content-ltr">
<div class="mw-translate-page-info">Esta página es una <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.hackcoop.com.ar/index.php?title=Especial:Traducir&amp;group=page-Correo+distribuido&amp;action=page&amp;filter=&amp;language=es">versión traducida</a></span> de la página <a href="Correo_distribuido.html" title="Correo distribuido">Correo distribuido</a>. La traducción está completa al 100%.</div>
<hr>
<div class="mw-pt-languages noprint" lang="es" dir="ltr"><table><tbody><tr valign="top">
<td class="mw-pt-languages-label">Otros idiomas:</td>
<td class="mw-pt-languages-list autonym">
<a href="Correo_distribuido/en.html" title="Correo distribuido/en">English</a> <img src="/extensions/Translate/resources/images/prog-4.png" alt="62%" title="62%" width="9" height="9"> • ‎<a href="Correo_distribuido.html" title="Correo distribuido"><span class="mw-pt-languages-ui">español</span></a> <img src="/extensions/Translate/resources/images/prog-5.png" alt="100%" title="100%" width="9" height="9">
</td>
</tr></tbody></table></div>
<p>Idea para infraestructura segura, resiliente y distribuida para entrega de correo, unida al <a href="Correo_local.html" title="Correo local">Correo local</a>.  Es similar a <a href="Owns.html" title="Owns">Owns</a> en <a href="DNS.html" title="DNS">DNS</a> con un poco de MixMinion pero sin requisitos especiales ni software nuevo.
</p>
<p>Hackers: <a href="Hacker:Fauno.html" title="Hacker:Fauno">Hacker:Fauno</a>, <a href="index.php?title=Hacker:Matus&amp;action=edit&amp;redlink=1.html" class="new" title="Hacker:Matus (la página no existe)">Hacker:Matus</a>
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contenido</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Objetivo"><span class="tocnumber">1</span> <span class="toctext">Objetivo</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Infraestructura"><span class="tocnumber">2</span> <span class="toctext">Infraestructura</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Explicaci.C3.B3n"><span class="tocnumber">3</span> <span class="toctext">Explicación</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#TODO"><span class="tocnumber">4</span> <span class="toctext">TODO</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Problemas_a_resolver"><span class="tocnumber">5</span> <span class="toctext">Problemas a resolver</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Ideas"><span class="tocnumber">6</span> <span class="toctext">Ideas</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Objetivo">Objetivo</span></h2>
<p>Aprovechar la capacidad infraestructural actual de los servidores de correo (MTA) y sus estándares (MX, prioridades, etc.) para armar una infraestructura distribuida de entrega de correo.
</p>
<p>Que las rutas por las que pase el correo sean lo más diversas posible, tanto para que no sea posible interceptar el 100% del correo como para tener servidores alternativos si nuestro servidor personal/principal tiene algún problema.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Infraestructura">Infraestructura</span></h2>
<p>Siguiendo las ideas aplicadas en <a href="Correo_local.html" title="Correo local">Correo local</a>, multiplicar los <i>gateways/relays</i> disponibles con una prioridad igual, de forma que los servidores externos elijan al azar uno de ellos para hacer la entrega.  Esto se logra:
</p>
<ul>
<li> Configurando distintos MTAs independientes/autónomos para actuar de <i>relays</i> de los mismos dominios
</li>
</ul>
<ul>
<li> Configurando estos MTAs como servidores de nuestro dominio, utilizando la infraestructura de DNS estándar, los registros MX.<br>Esto se puede lograr tanto creando varios registros MX para el mismo dominio con la misma prioridad (el estándar dice que si varios MTAs tienen la misma prioridad, el MTA externo debe elegir uno al azar) o creando registros con bajo tiempo de vida (TTL) y actualizándolos a partir de un pool de MTAs disponibles (o las dos cosas si tenemos muchos más servidores de los que conviene poner en DNS.)
</li>
</ul>
<ul>
<li> Conectando los MTAs <i>gateway</i> con los internos vía <a href="LibreVPN.html" title="LibreVPN">LibreVPN</a>, como en <a href="Correo_local.html" title="Correo local">Correo local</a>.
</li>
</ul>
<p><br>
</p>
<h2><span class="mw-headline" id="Explicaci.C3.B3n">Explicación</span></h2>
<p>Al configurar muchos servidores independientes para que actúen de servidores del mismo dominio, pero haciendo la entrega final en uno dentro de <a href="LibreVPN.html" title="LibreVPN">LibreVPN</a> (o a otro MTA público), multiplicamos las rutas por las que pasa un correo, volviendo más difícil la intercepción.  Se aprovechan las capacidades actuales del software, es decir todos los MTAs libres poseen la capacidad de ser un <i>relay</i> de otro servidor (o sea ser servidores secundarios) y por otro lado se aprovechan los registros MX y sus prioridades para hacer este intercambio de rutas.
</p>
<p>Es importante que los servidores sean autónomos para evitar caídas o toma de control en conjunto, perdiendo autonomía y anonimato la red.  Proponemos una red de MTAs independientes que se ayudan entre sí para dar lugar a una infraestructura más estable, resiliente y escalable a la vez que distribuida entre pares.
</p>
<p>Es decir, se trata de la misma infraestructura que utilizan los grandes proveedores de correo utilizada para nuestros fines.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="TODO">TODO</span></h2>
<ul>
<li> Distribuir la lista de dominios dinámicamente, estuvimos charlando de usar bases de datos distribuidas (ver <a href="Integrar_wordpress_con_correo.html" title="Integrar wordpress con correo">Integrar wordpress con correo</a>) o bien con un repositorio git actualizado regularmente.
</li>
</ul>
<p>-- Lo del repositorio es mejor para saber quién subió un dominio y tener cambios locales, la otra opción es más automática y dentro de un clúster de otras cosas (granja de bases de datos, etc.) <a href="Hacker:Fauno.html" title="Hacker:Fauno">Fauno</a> (<a href="index.php?title=Hacker_discusi%C3%B3n:Fauno&amp;action=edit&amp;redlink=1.html" class="new" title="Hacker discusión:Fauno (la página no existe)">discusión</a>) 16:40 11 dic 2013 (ART)
</p>
<h2><span class="mw-headline" id="Problemas_a_resolver">Problemas a resolver</span></h2>
<ul>
<li> Cuando se cae el enlace por <a href="LibreVPN.html" title="LibreVPN">LibreVPN</a>, el relay acumula correos pero no puede hacer el delivery.
<ul>
<li> Para dejar de recibir correos en este servidor, sacarlo del pool de relays (o dejar que se venza el registro, lo que sea más fácil de implementar, ver pool de IPs en <a href="Owns.html" title="Owns">Owns</a>)
</li>
<li> Cuando vuelve la conexión, ejecutar un flush de la cola de correos para recibirlos de inmediato (ver <a href="LibreVPN:Eventos.html" title="LibreVPN:Eventos">eventos en LibreVPN</a>, hay uno que se llama <i>postqueue</i>)
</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Ideas">Ideas</span></h2>
<p>Para hacer pruebas
</p>
<ul>
<li> Anunciar dinámicamente relays en un registro DNS-SD con un pool de IPs. Ejemplo:
</li>
</ul>
<pre> drill _relays._smtp._tcp.librevpn.com.ar
</pre>
<pre> 500 IN A x.x.x.x
 500 IN A y.y.y.y
</pre>
<p>Los registros tienen que ser de poca duración para que la rotación sea alta.  La idea es que solo se configura un relay fijo y los servidores van cambiando segun cambien los registros del pool y el round robin de dns.  Los DNS se administrarían con <a href="Owns.html" title="Owns">Owns</a>.
</p>
<p>NOTA: no es así como se usa <a rel="nofollow" class="external text" href="http://dns-sd.org">DNS-SD</a> igual :P
</p>
<p><a rel="nofollow" class="external text" href="http://www.howtoforge.com/forums/showthread.php?t=46282">este link</a> prueba que la idea funciona!
</p>
<ul>
<li> Usar headers_check de postfix para anonimizar los saltos
</li>
</ul>
<ul>
<li> Probar hacer saltos al salir, no sólo al entrar (con transport y la misma idea de relay por dns-sd)
</li>
</ul>

</div>						<footer><div id="catlinks" class="catlinks well"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="Especial:Categor%C3%ADas.html" title="Especial:Categorías">Categorías</a>: <ul>
<li><a href="Categor%C3%ADa:LAN.html" title="Categoría:LAN">LAN</a></li>
<li><a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHacer</a></li>
</ul>
</div></div></footer>
											</article>
				</div>

				<ul class="horizontal">
<li> <a href="HackLab_de_Barracas:Derechos_de_autor.html" title="HackLab de Barracas:Derechos de autor">Licencia</a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://fm.hackcoop.com.ar/">Radios</a>
</li>
<li> <a href="Categor%C3%ADa:Campa%C3%B1as.html" title="Categoría:Campañas">Campañas</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://hackcoop.com.ar/listas/">Listas de correo</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Páginas especiales</a>
</li>
<li> <a href="Glosario.html" title="Glosario" class="mw-redirect">Glosario</a>
</li>
</ul>
<ul class="horizontal">
<li><a href="HackLab_de_Barracas:Pol%C3%ADtica_de_protecci%C3%B3n_de_datos.html" title="HackLab de Barracas:Política de protección de datos">Política de protección de datos</a></li>
<li><a href="HackLab_de_Barracas:Acerca_de.html" title="HackLab de Barracas:Acerca de">Acerca de HackLab de Barracas</a></li>
<li><a href="HackLab_de_Barracas:Limitaci%C3%B3n_general_de_responsabilidad.html" title="HackLab de Barracas:Limitación general de responsabilidad">Aviso legal</a></li>
</ul>
<ul class="horizontal pull-right"><li><a href="/www.mediawiki.org/.html"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a></li></ul>

			</div> </body>
			</html>
