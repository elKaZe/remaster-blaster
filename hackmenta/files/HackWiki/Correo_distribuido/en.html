<!DOCTYPE html>
<html lang="es" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8">
<title>Distributed email - HackLab de Barracas</title>
<meta name="generator" content="MediaWiki 1.22.0">
<meta name="robots" content="noindex,follow">
<meta name="description" content="Idea for a secure, resilient and distributed infrastructure for email delivery, along with Correo local/en.  It's similar to Owns/en for DNS with a little of MixMinion but without the special requisites or new software.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="favicon.ico.html">
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php.html" title="HackLab de Barracas (es)">
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.hackcoop.com.ar/api.php?action=rsd">
<link rel="copyright" href="HackLab_de_Barracas:Derechos_de_autor.html">
<link rel="alternate" type="application/atom+xml" title="Feed Atom de HackLab de Barracas" href="index.php?title=Especial:CambiosRecientes&amp;feed=atom.html">
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:da81894a262faddb62408789293d7adb */</style>

<meta property="og:type" content="article">
	<meta property="og:site_name" content="HackLab de Barracas">
	<meta property="og:title" content="Correo distribuido/en">
	<meta property="og:description" content="Idea for a secure, resilient and distributed infrastructure for email delivery, along with Correo local/en.  It's similar to Owns/en for DNS with a little of MixMinion but without the special requisites or new software.">
	<meta property="og:url" content="http://wiki.hackcoop.com.ar/Correo_distribuido/en">
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Correo_distribuido_en skin-bootstrap action-view">

			<nav class="navbar"><div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="P%C3%A1gina_principal.html">HackLab de Barracas</a><div id="user" class="pull-right btn-group">
<a href="index.php?title=Especial:Entrar&amp;returnto=Correo+distribuido%2Fen&amp;returntoquery=printable%3Dyes.html" class="btn btn-warning">Iniciar sesión <icon class="icon-signin icon-white"></icon></a><button class="btn dropdown-toggle btn-warning" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu">
<li id="pt-uls" class="active"><a href="#" class="uls-trigger autonym">español</a></li>
<li id="pt-createaccount"><a href="index.php?title=Especial:Entrar&amp;returnto=Correo+distribuido%2Fen&amp;returntoquery=printable%3Dyes&amp;type=signup.html">Crear una cuenta</a></li>
</ul>
</div>
<div class="nav-collapse"><ul class="nav">
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:Gu%C3%ADas.html" title="Categoría:Guías">Guías</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://wiki.hackcoop.com.ar/index.php?title=Especial:Categor%C3%ADas&amp;limit=500">Categorías</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">Quehaceres</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://irc.hackcoop.com.ar/">Chat</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
</ul></div>
</div></div>
<div id="page" class="pull-right"><ul class="nav nav-tabs">
<li id="ca-nstab-main" class="selected"><a href="Correo_distribuido/en.html" title="Ver el artículo [c]" accesskey="c">Página</a></li>
<li id="ca-talk" class="new"><a href="index.php?title=Discusi%C3%B3n:Correo_distribuido/en&amp;action=edit&amp;redlink=1.html" title="Discusión acerca del artículo [t]" accesskey="t">Discusión</a></li>
<li id="ca-viewsource"><a href="index.php?title=Correo_distribuido/en&amp;action=edit.html" title="Esta página está protegida.
Puedes ver su código fuente [e]" accesskey="e">Ver fuente</a></li>
<li id="ca-history"><a href="index.php?title=Correo_distribuido/en&amp;action=history.html" rel="archives" title="Versiones anteriores de esta página y sus autores [h]" accesskey="h">Historial</a></li>
</ul></div></nav>

			<div id="page" class="container container-fluid">

				<div class="row-fluid">
					<aside class="span3">
								<ul class="nav nav-stacked nav-pills">
<li><form action="/index.php" class="search"><input type="search" name="search" placeholder="Search" title="Buscar en HackLab de Barracas [f]" accesskey="f" id="searchInput" class="search-query"></form></li>
<li> <a href="P%C3%A1gina_principal.html" title="Página principal"><img alt="LogoHacklab.svg" src="../../File:195px-LogoHacklab.svg.png" width="195" height="195" srcset="/images/thumb/9/9d/LogoHacklab.svg/293px-LogoHacklab.svg.png 1.5x, /images/thumb/9/9d/LogoHacklab.svg/390px-LogoHacklab.svg.png 2x"></a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a href="Crear_articulo.html" title="Crear articulo">Crear articulo</a>
</li>
<li> <a href="Especial:SubirArchivo.html" title="Especial:SubirArchivo">Subir un archivo</a>
</li>
<li> <a href="Especial:UploadWizard.html" title="Especial:UploadWizard">Subir archivos</a>
</li>
<li> <a href="Categor%C3%ADa:CositaLinda.html" title="Categoría:CositaLinda">Cositas Lindas</a>
</li>
<li> <a href="Especial:ListaIm%C3%A1genes.html" title="Especial:ListaImágenes">y más archivos</a>
</li>
<li> <a href="Categor%C3%ADa:Proyectos.html" title="Categoría:Proyectos">Proyectos</a>
</li>
<li> <a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHaceres</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Otras acciones</a>
</li>
</ul>
							</aside>
						
					<article id="content" class="span8" style="margin: 2em; margin-bottom: 0">
						<div class="page-header">
							<h1>
								Distributed email								<small></small>
							</h1>
						</div>	
						<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="mw-translate-page-info">Esta página es una <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.hackcoop.com.ar/index.php?title=Especial:Traducir&amp;group=page-Correo+distribuido&amp;action=page&amp;filter=&amp;language=en">versión traducida</a></span> de la página <a href="Correo_distribuido.html" title="Correo distribuido">Correo distribuido</a>. La traducción está completa al 62%.</div>
<hr>
<div class="mw-pt-languages noprint" lang="es" dir="ltr"><table><tbody><tr valign="top">
<td class="mw-pt-languages-label">Otros idiomas:</td>
<td class="mw-pt-languages-list autonym">
<span class="mw-pt-languages-selected">English</span> <img src="/extensions/Translate/resources/images/prog-4.png" alt="62%" title="62%" width="9" height="9"> • ‎<a href="Correo_distribuido.html" title="Correo distribuido"><span class="mw-pt-languages-ui">español</span></a> <img src="/extensions/Translate/resources/images/prog-5.png" alt="100%" title="100%" width="9" height="9">
</td>
</tr></tbody></table></div>
<p>Idea for a secure, resilient and distributed infrastructure for email delivery, along with <a href="Correo_local/en.html" title="Correo local/en">Correo local/en</a>.  It's similar to <a href="index.php?title=Owns/en&amp;action=edit&amp;redlink=1.html" class="new" title="Owns/en (la página no existe)">Owns/en</a> for <a href="DNS.html" title="DNS">DNS</a> with a little of MixMinion but without the special requisites or new software.
</p>
<p>Hackers: <a href="Hacker:Fauno.html" title="Hacker:Fauno">Hacker:Fauno</a>, <a href="index.php?title=Hacker:Matus&amp;action=edit&amp;redlink=1.html" class="new" title="Hacker:Matus (la página no existe)">Hacker:Matus</a>
</p>
<div id="toc" class="toc">
<div id="toctitle"><h2>Contenido</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Goal"><span class="tocnumber">1</span> <span class="toctext">Goal</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Infrastructure"><span class="tocnumber">2</span> <span class="toctext">Infrastructure</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Explanation"><span class="tocnumber">3</span> <span class="toctext">Explanation</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#TODO"><span class="tocnumber">4</span> <span class="toctext">TODO</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Problemas_a_resolver"><span class="tocnumber">5</span> <span class="toctext">Problemas a resolver</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Ideas"><span class="tocnumber">6</span> <span class="toctext">Ideas</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Goal">Goal</span></h2>
<p>To take advantage of the infrastructural capacity of current email servers (MTAs) and their standards (MX, priorities, etc.) to device a distributed infrastructura for email delivery.
</p>
<p>That the routes an email takes be as diverse as possible, to make impossible to intercept 100% of the incoming email or to have alternative backups for our personal servers as well.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Infrastructure">Infrastructure</span></h2>
<p>Following ideas from <a href="Correo_local/en.html" title="Correo local/en">Correo local/en</a>, multiply available gateways/relays with equal priority, in such way that external servers pick one at random to make the delivery.  This is achieved by:
</p>
<ul>
<li> Configuring several independent/autonomous MTAs who act as relays of the same domains
</li>
</ul>
<ul>
<li> Configuring these MTAs as servers of our domains, using the standar DNS infrastructure, the MX records.<br> This can be achieved by creating several MX records for the same domain under the same priority (standards say that given the same priority for different MTAs, the connecting MTA must pick one at random) or by creating low time-to-live (TTL) records and updating them from a pool of available MTAs (or both if we have much more servers than it's convenient for DNS).
</li>
</ul>
<ul>
<li> By connecting gateway MTAs via <a href="LibreVPN/en.html" title="LibreVPN/en">LibreVPN/en</a>, like in <a href="Correo_local/en.html" title="Correo local/en">Correo local/en</a>.
</li>
</ul>
<p><br>
</p>
<h2><span class="mw-headline" id="Explanation">Explanation</span></h2>
<p>When many independent servers are configured to act under the same domain, but making the final delivery to another inside <a href="LibreVPN/en.html" title="LibreVPN/en">LibreVPN/en</a> (or another public MTA), we can multiply the routes through which email is sent, making interception more difficult.  We take advantage of current email features, since every libre MTA is able to act as a relay to another server (or to act as secondary servers) and DNS' MX records and their priorities to achieve route switching.
</p>
<p>It's important that servers are autonomous to avoid failures or complete seizing, losing autonomy and anonimacy in the network.  We proppose a network of independent MTAs cooperating to give place to a more stable, resilient and scalable infrastructure while being distributed among peers.
</p>
<p>That is, it's the same infrastructure the big email providers uses but turned around to suit our ends.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="TODO">TODO</span></h2>
<ul>
<li> Distribuir la lista de dominios dinámicamente, estuvimos charlando de usar bases de datos distribuidas (ver <a href="Integrar_wordpress_con_correo.html" title="Integrar wordpress con correo">Integrar wordpress con correo</a>) o bien con un repositorio git actualizado regularmente.
</li>
</ul>
<p>-- The repository approach is best to know who put up a given domain and to maintain local changes, the other option is more automated and only possible in a cluster of other things (database farm, etc.) <a href="index.php?title=Hacker:FuzzyBot&amp;action=edit&amp;redlink=1.html" class="new" title="Hacker:FuzzyBot (la página no existe)">FuzzyBot</a> (<a href="index.php?title=Hacker_discusi%C3%B3n:FuzzyBot&amp;action=edit&amp;redlink=1.html" class="new" title="Hacker discusión:FuzzyBot (la página no existe)">discusión</a>) 02:37 24 mayo 2014 (ART)
</p>
<h2><span class="mw-headline" id="Problemas_a_resolver">Problemas a resolver</span></h2>
<ul>
<li> Cuando se cae el enlace por <a href="LibreVPN.html" title="LibreVPN">LibreVPN</a>, el relay acumula correos pero no puede hacer el delivery.
<ul>
<li> Para dejar de recibir correos en este servidor, sacarlo del pool de relays (o dejar que se venza el registro, lo que sea más fácil de implementar, ver pool de IPs en <a href="Owns.html" title="Owns">Owns</a>)
</li>
<li> Cuando vuelve la conexión, ejecutar un flush de la cola de correos para recibirlos de inmediato (ver <a href="LibreVPN:Eventos.html" title="LibreVPN:Eventos">eventos en LibreVPN</a>, hay uno que se llama <i>postqueue</i>)
</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Ideas">Ideas</span></h2>
<p>Para hacer pruebas
</p>
<ul>
<li> Anunciar dinámicamente relays en un registro DNS-SD con un pool de IPs. Ejemplo:
</li>
</ul>
<pre> drill _relays._smtp._tcp.librevpn.com.ar
</pre>
<pre> 500 IN A x.x.x.x
 500 IN A y.y.y.y
</pre>
<p>Los registros tienen que ser de poca duración para que la rotación sea alta.  La idea es que solo se configura un relay fijo y los servidores van cambiando segun cambien los registros del pool y el round robin de dns.  Los DNS se administrarían con <a href="Owns.html" title="Owns">Owns</a>.
</p>
<p>NOTA: no es así como se usa <a rel="nofollow" class="external text" href="http://dns-sd.org">DNS-SD</a> igual :P
</p>
<p><a rel="nofollow" class="external text" href="http://www.howtoforge.com/forums/showthread.php?t=46282">este link</a> prueba que la idea funciona!
</p>
<ul>
<li> Usar headers_check de postfix para anonimizar los saltos
</li>
</ul>
<ul>
<li> Probar hacer saltos al salir, no sólo al entrar (con transport y la misma idea de relay por dns-sd)
</li>
</ul>

</div>						<footer><div id="catlinks" class="catlinks well"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="Especial:Categor%C3%ADas.html" title="Especial:Categorías">Categorías</a>: <ul>
<li><a href="Categor%C3%ADa:LAN.html" title="Categoría:LAN">LAN</a></li>
<li><a href="Categor%C3%ADa:QueHacer.html" title="Categoría:QueHacer">QueHacer</a></li>
</ul>
</div></div></footer>
											</article>
				</div>

				<ul class="horizontal">
<li> <a href="HackLab_de_Barracas:Derechos_de_autor.html" title="HackLab de Barracas:Derechos de autor">Licencia</a>
</li>
<li> <a href="Donaciones.html" title="Donaciones">Donaciones ♡</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://fm.hackcoop.com.ar/">Radios</a>
</li>
<li> <a href="Categor%C3%ADa:Campa%C3%B1as.html" title="Categoría:Campañas">Campañas</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://hackcoop.com.ar/listas/">Listas de correo</a>
</li>
<li> <a href="Especial:P%C3%A1ginasEspeciales.html" title="Especial:PáginasEspeciales">Páginas especiales</a>
</li>
<li> <a href="Glosario.html" title="Glosario" class="mw-redirect">Glosario</a>
</li>
</ul>
<ul class="horizontal">
<li><a href="HackLab_de_Barracas:Pol%C3%ADtica_de_protecci%C3%B3n_de_datos.html" title="HackLab de Barracas:Política de protección de datos">Política de protección de datos</a></li>
<li><a href="HackLab_de_Barracas:Acerca_de.html" title="HackLab de Barracas:Acerca de">Acerca de HackLab de Barracas</a></li>
<li><a href="HackLab_de_Barracas:Limitaci%C3%B3n_general_de_responsabilidad.html" title="HackLab de Barracas:Limitación general de responsabilidad">Aviso legal</a></li>
</ul>
<ul class="horizontal pull-right"><li><a href="/www.mediawiki.org/.html"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a></li></ul>

			</div> </body>
			</html>
